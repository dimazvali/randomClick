
doctype html
html
  head
    title auction
    script(src='https://telegram.org/js/telegram-web-app.js')

    meta(name='viewport' content='width=device-width, initial-scale=1.0,user-scalable=no')
    meta(name='description' content='Попробуйте — вам понравится.')

    script(src='/javascripts/knockout.js')
    script(type="module" src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js")
    script(type="module" src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js")
    script(type="module" src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js")
    script(type="module" src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js")
    script(src='https://cdnjs.cloudflare.com/ajax/libs/axios/0.20.0/axios.js')
    script!=`let botLink="${botLink}"`
    script!=`let translations=${JSON.stringify(translations)}`
    script!=`let lang="${lang}"`

    script!=`intention=${start ? `"${start}"` : false }`
    script(src='/javascripts/common.js')
    script(type="module" src='/javascripts/classes.js')
    script!=`${start?`let start="${start}"`:'let start=null'}`
    script(src="https://cdn.jsdelivr.net/jsbarcode/3.3.20/JsBarcode.all.min.js") 
    link(rel='stylesheet', href='/stylesheets/app.css')
    link(rel='stylesheet', href='/stylesheets/appCustom.css')
    link(rel="preconnect", href="https://fonts.googleapis.com")
    link(rel="preconnect", href="https://fonts.gstatic.com")
    link(rel="stylesheet", href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700;900&display=swap")
    script(src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js")


  body#b
    .popup(data-bind="attr:{'data-hidden':active()!=`tapper`?`hidden`:`reg`}")
        div.b.active(data-bind="html:`<span>👩🏻‍💻</span> ${username()}`")
        div.b(data-bind="html:`<span>💵</span> ${score()}`")
        div.b(data-bind="html:`<span>💸</span> ${income()}`")
        img#tap(src="/images/click2.png" data-bind="event:{click:(e)=>tap(e)}")

        
    .popup(data-bind="attr:{'data-hidden':active()!=`refs`?`hidden`:`reg`}")
        div.b.active(data-bind="html:`<span>👩🏻‍💻</span> ${username()}`")
        div.b(data-bind="html:`<span>💵</span> ${score()}`")
        div.b(data-bind="html:`<span>👥</span> Приглашено: ${refs()}`")
        div.ref
            h2 Получи 15.000 поинтов за друга
            p.info(data-bind="html:https://t.me/azart_clicker_bot?start=ref_${id}`")
            button(data-bind!="event:{click:()=>copyRef()}") скопировать
        
    .popup(data-bind="attr:{'data-hidden':active()!=`actions`?`hidden`:`reg`}")
        div.b.active(data-bind="html:`<span>👩🏻‍💻</span> ${username()}`")
        div.b(data-bind="html:`<span>💵</span> ${score()}`")
        div.actions(data-bind="foreach:actions")
            div(data-bind="attr:{class:active()?'active':'passive'}")
                p.name(data-bind="text:name")
                p.info(data-bind="text:description")
                button(data-bind="attr:{disabled:active()?false:true}, event:{click:$parent.claim}, text: active() ? `Участвовать ${price()?`(${price()})`:''}` : 'Вы участвуете'") 
    .popup(data-bind="attr:{'data-hidden':active()!=`pump`?`hidden`:`reg`}")
        div.b.active(data-bind="html:`<span>👩🏻‍💻</span> ${username()}`")
        div.b(data-bind="html:`<span>💵</span> ${score()}`")
        h2 В разработке...
     
    
    
    
    table#footer
        tr
            td#tapper(data-bind="event:{click:()=>setActive(`tapper`)}, attr:{'data-chosen':active()=='tapper'?true:false}") 🎯
            td#refs(data-bind="event:{click:()=>setActive(`refs`)}, attr:{'data-chosen':active()=='refs'?true:false}") 👤
        tr
            td#actions(data-bind="event:{click:()=>setActive(`actions`)}, attr:{'data-chosen':active()=='actions'?true:false}") 🎁
            td#tapper(data-bind="event:{click:()=>setActive(`pump`)}, attr:{'data-chosen':active()=='pump'?true:false}") ⚙️
    //- #footer
    //-     .flex
    //-         #tapper(data-bind="event:{click:()=>setActive(`tapper`)}, attr:{'data-chosen':active()=='tapper'?true:false}") тап
    //-         #refs(data-bind="event:{click:()=>setActive(`refs`)}, attr:{'data-chosen':active()=='refs'?true:false}") рефы
    //-     .flex
    //-         #actions(data-bind="event:{click:()=>setActive(`actions`)}, attr:{'data-chosen':active()=='actions'?true:false}") акции
    //-         #tapper(data-bind="event:{click:()=>setActive(`pump`)}, attr:{'data-chosen':active()=='pump'?true:false}") прокачка
  

  script(type="module" src='/javascripts/app.js')
  script(src='/javascripts/appCommon.js')
